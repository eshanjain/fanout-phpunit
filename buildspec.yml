version: 0.2
 
batch:
   fast-fail: false
   build-fanout:
     parallelism: 1
     ignore-failure: false
 
phases:
   install:
     commands:
       - echo 'Install dependencies'
       - composer init -n --name=vendor/calculator --description="A simple calculator project" --require="php:>=7.4" --require-dev="phpunit/phpunit:^9.5"
       - composer require --dev phpunit/phpunit
   pre_build:
     commands:
       - echo 'prebuild'
   build:
     commands:
       - echo 'Running phpunit Tests'
       - jq '.autoload = {"psr-4": {"App\\": "src/"}}' composer.json > composer.json.tmp && mv composer.json.tmp composer.json
       - composer dump-autoload
       - ./vendor/bin/phpunit

   post_build:
       commands:
         - echo 'Test execution completed'
